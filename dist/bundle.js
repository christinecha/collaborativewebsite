!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var o=i(2),d=n(o),a=i(3),s=n(a),r=i(4),h=n(r),u=i(5),c=n(u),l=i(6),f=i(7);console.log("----------------------------------------------------------------------"),console.log("source code ----> https://github.com/christinecha/collaborativewebsite"),console.log("----------------------------------------------------------------------");var v=document.getElementById("node-editor"),p=document.getElementById("wtf"),y=document.getElementById("warning"),m=document.getElementById("mailing-list"),g=document.querySelector(".trigger-open"),w=document.querySelector(".trigger-close"),b=firebase.database().ref("/nodes"),$=new d["default"]({handleSubmit:function(e){return T(e)}}),x={box:c["default"],text:s["default"],image:h["default"]},k=null,C={},M=function(e){y.textContent=e,y.classList.add("is-active"),setTimeout(function(){y.classList.remove("is-active")},3e3)},T=function(e){if((0,l.isValidConfig)(e)){var t={coords:e.data.coords,size:e.data.size};"text"===e.type&&(t.text=e.data.text,t.font=e.data.font,t.color=e.data.color,e.data=t,E(e)),"box"===e.type&&(t.color=e.data.color,e.data=t,E(e)),"image"===e.type&&(t.src=e.data.src,e.data=t,(0,f.isValidImageSrc)(t.src).then(function(){return E(e)})["catch"](function(e){return M(e)}))}},E=function(e){var t={type:e.type,data:e.data,createdBy:k,createdAt:(new Date).getTime()};b.push(t)["catch"](function(e){return console.warn(e)})},I=function(e){for(var t in e)if(C[t]){var i=C[t];i.update(e[t])}else{var n=x[e[t].type];C[t]=new n(e[t])}},N=(new Date).getTime(),z=N-864e5,B=function(){firebase.database().ref("/nodes").orderByChild("createdAt").endAt(z).once("value",function(e){var t=e.val();for(var i in t)firebase.database().ref("/nodes/"+i).remove()})},L=function(e){firebase.database().ref("/nodes").orderByChild("createdAt").startAt(z).on("value",function(t){var i=t.val();e(i)})};document.addEventListener("click",function(e){var t=e.path;if(!(t.indexOf(v)>-1)){if(t.indexOf(p)>-1)return e.target===g&&p.setAttribute("data-status","opened"),void(e.target===w&&p.setAttribute("data-status","closed"));var i=e.pageX,n=e.pageY;$.renderAt(i,n)}}),m.addEventListener("submit",function(e){e.preventDefault();var t=document.getElementById("email-input").value;firebase.database().ref("/emails").push({email:t,createdAt:(new Date).getTime()}).then(function(){m.innerHTML="<p>you are great</p>"})}),firebase.auth().onAuthStateChanged(function(e){return e&&e.uid?(k=e.uid,B(),void L(I)):void firebase.auth().signInAnonymously()})},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),a=i(3),s=n(a),r=i(4),h=n(r),u=i(5),c=n(u),l={"node-color":"nodeColor","node-text":"nodeText","node-type":"nodeType","node-font":"nodeFont","node-size":"nodeSize","node-image-src":"nodeImageSrc"},f=function(){function e(t){o(this,e),this.handleSubmit=t.handleSubmit,this.$container=document.getElementById("node-editor"),this.$submitButton=document.getElementById("submit-node"),this.$nodeType=document.getElementById("node-type"),this.$nodeText=document.getElementById("node-text"),this.$nodeFont=document.getElementById("node-font"),this.$nodeSize=document.getElementById("node-size"),this.$nodeColor=document.getElementById("node-color"),this.$nodeImageSrc=document.getElementById("node-image-src"),this.previewTextNode=new s["default"]({previewMode:!0}),this.previewImageNode=new h["default"]({previewMode:!0}),this.previewBoxNode=new c["default"]({previewMode:!0}),this.previewImageNode.hide(),this.previewBoxNode.hide(),this.nodeType="text",this.nodeSize="medium",this.nodeFont="inconsolata",this.nodeColor="#000000",this.initEventListeners()}return d(e,[{key:"clearFields",value:function(){this.$nodeText.value="",this.$nodeFont.value="inconsolata",this.$nodeSize.value="medium",this.$nodeImageSrc.value="",this.nodeColor="#000000",this.nodeText="",this.nodeFont="inconsolata",this.nodeSize="medium",this.nodeImageSrc="",this.updatePreviewNodes()}},{key:"initEventListeners",value:function(){this.$nodeText.addEventListener("keyup",this.handleChange.bind(this)),this.$nodeImageSrc.addEventListener("keyup",this.handleChange.bind(this)),this.$nodeType.addEventListener("change",this.handleChange.bind(this)),this.$nodeFont.addEventListener("change",this.handleChange.bind(this)),this.$nodeSize.addEventListener("change",this.handleChange.bind(this)),this.$nodeColor.addEventListener("click",this.changeColor.bind(this)),this.$submitButton.addEventListener("click",this.submitNode.bind(this))}},{key:"getConfig",value:function(){return{previewMode:!0,type:this.nodeType||"text",data:{color:this.nodeColor,src:this.nodeImageSrc,size:this.nodeSize||"medium",text:this.nodeText,coords:this.coords,font:this.nodeFont||"inconsolata"}}}},{key:"changeColor",value:function(){for(var e="0123456789abcdef".split(""),t="#";t.length<7;){var i=Math.round(Math.random()*(e.length-1));t+=e[i]}this.nodeColor=t,this.updatePreviewNodes()}},{key:"handleChange",value:function(e){e.preventDefault();var t=l[e.target.id];this[t]=e.target.value,this.$container.setAttribute("type",this.nodeType),this.updatePreviewNodes()}},{key:"updatePreviewNodes",value:function(){"text"===this.nodeType&&(this.previewTextNode.update(this.getConfig()),this.previewTextNode.show(),this.previewBoxNode.hide(),this.previewImageNode.hide()),"image"===this.nodeType&&(this.previewImageNode.update(this.getConfig()),this.previewImageNode.show(),this.previewBoxNode.hide(),this.previewTextNode.hide()),"box"===this.nodeType&&(this.previewBoxNode.update(this.getConfig()),this.previewBoxNode.show(),this.previewImageNode.hide(),this.previewTextNode.hide())}},{key:"hide",value:function(){this.$container.style.display="none",this.previewTextNode.hide(),this.previewImageNode.hide(),this.previewBoxNode.hide()}},{key:"renderAt",value:function(e,t){this.coords=[e,t],this.$container.style.display="inline-block",window.innerWidth-e<this.$container.clientWidth?(this.$container.style.right=0,this.$container.style.left="auto",this.$container.style.top=t+"px"):(this.$container.style.right="auto",this.$container.style.left=e+"px",this.$container.style.top=t+"px"),t-this.$container.clientHeight<0&&(this.$container.style.top=this.$container.clientHeight+"px"),this.$nodeText.focus(),this.updatePreviewNodes()}},{key:"submitNode",value:function(e){e.preventDefault(),this.handleSubmit&&this.handleSubmit(this.getConfig()),this.clearFields(),this.hide()}}]),e}();t["default"]=f},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){i(this,e),this.$node=document.createElement("div"),this.$node.classList.add("text-node"),document.body.appendChild(this.$node),t&&(t.previewMode&&(this.previewMode=t.previewMode),t.data&&(this.data=t.data,this.render()))}return n(e,[{key:"destroy",value:function(){document.body.removeChild(this.$node)}},{key:"hide",value:function(){this.$node.style.display="none"}},{key:"show",value:function(){this.$node.style.display="block"}},{key:"update",value:function(e){this.data=e.data,this.previewMode=e.previewMode,this.render()}},{key:"render",value:function(){this.data.text&&""!==this.data.text?this.$node.textContent=this.data.text:this.$node.innerHTML="&nbsp;",this.$node.style.left=this.data.coords[0]+"px",this.$node.style.top=this.data.coords[1]+"px",this.data.font&&this.$node.setAttribute("font",this.data.font),this.data.size&&this.$node.setAttribute("size",this.data.size),this.data.color&&(this.$node.style.color=this.data.color),this.previewMode?this.$node.classList.add("preview-mode"):this.$node.classList.remove("preview-mode")}}]),e}();t["default"]=o},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){i(this,e),this.$node=document.createElement("img"),this.$node.classList.add("image-node"),document.body.appendChild(this.$node),t&&(t.previewMode&&(this.previewMode=t.previewMode),t.data&&(this.data=t.data),this.render())}return n(e,[{key:"destroy",value:function(){document.body.removeChild(this.$node)}},{key:"hide",value:function(){this.$node.style.display="none"}},{key:"show",value:function(){this.$node.style.display="block"}},{key:"update",value:function(e){this.data=e.data,this.previewMode=e.previewMode,this.render()}},{key:"render",value:function(){this.data&&this.data.src?this.$node.src=this.data.src:this.$node.src="./assets/placeholder-image.png",this.previewMode?this.$node.classList.add("preview-mode"):this.$node.classList.remove("preview-mode"),this.data&&(this.data.size&&this.$node.setAttribute("size",this.data.size),this.data.coords&&(this.$node.style.left=this.data.coords[0]+"px",this.$node.style.top=this.data.coords[1]+"px"))}}]),e}();t["default"]=o},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),o=function(){function e(t){i(this,e),this.$node=document.createElement("div"),this.$node.classList.add("box-node"),document.body.appendChild(this.$node),t&&(t.previewMode&&(this.previewMode=t.previewMode),t.data&&(this.data=t.data),this.render())}return n(e,[{key:"destroy",value:function(){document.body.removeChild(this.$node)}},{key:"hide",value:function(){this.$node.style.display="none"}},{key:"show",value:function(){this.$node.style.display="block"}},{key:"update",value:function(e){this.data=e.data,this.previewMode=e.previewMode,this.render()}},{key:"render",value:function(){this.previewMode?this.$node.classList.add("preview-mode"):this.$node.classList.remove("preview-mode"),this.data&&(this.data.size&&this.$node.setAttribute("size",this.data.size),this.data.color&&(this.$node.style.backgroundColor=this.data.color),this.data.coords&&(this.$node.style.left=this.data.coords[0]+"px",this.$node.style.top=this.data.coords[1]+"px"))}}]),e}();t["default"]=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={box:["size","color"],text:["color","font","size","text","coords"],image:["size","src"]};t.isValidConfig=function(e){if(!e)return!1;var t=e.type,n=e.data;if(!t||!n||!i[t])return!1;var o=i[t];return o.forEach(function(e){if(!n[e])return!1}),!0}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isValidImageSrc=function(e){return new Promise(function(t,i){var n=document.createElement("img");n.onload=function(){var e=n.height,o=n.width;e>1e3||o>1e3?i("The max image size is 1000px in either direction."):t()},n.onerror=function(){return i("This is not a valid image source.")},n.src=e})}}]);